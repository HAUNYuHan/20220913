```
#include <ESP32Servo.h>

Servo servo;//create an object
int angle;
int shaft_angle=15;
//Possible PWM GPIO pins on the ESP32: 0(used by on-board button),2,4,5(used by on-board LED),12-19,21-23,25-27,32-33
int servoPin = 23;

void setup(){
  //servo.attach(pin,min,max)
  ESP32PWM::allocateTimer(0);
  ESP32PWM::allocateTimer(1);
  ESP32PWM::allocateTimer(2);
  ESP32PWM::allocateTimer(3);

 int usmin = 600;
 int usmax = 2400;
 servo.setPeriodHertz(50);  //standard 50 hz servo
 servo.attach(servoPin,usmin,usmax);
}

void loop(){
  //forward sweeping
  //for(angle=0;angle<=180;angle++){
  for(angle=0;angle<=180;angle=angle+shaft_angle){
    //Write a value to the servo, controlling the shaft accordingly
    //0<= angle <=180
    servo.write(angle);
    delay(500);
  }

//backward sweeping
//for(angle=0;angle<=180;angle--){
for(angle=0;angle<=180;angle=angle-shaft_angle){
  servo.write(angle);
  delay(100);
  }
}
```
